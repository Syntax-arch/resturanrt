<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãŠå®¢æ§˜ã®å£° - ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <style>
    .review-card {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      border: 1px solid rgba(141, 110, 99, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .review-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .review-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    .review-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin-right: 1rem;
      object-fit: cover;
      border: 3px solid #8d6e63;
    }
    .rating-stars {
      color: #ffc107;
      font-size: 1.2rem;
    }
    .review-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin: 1rem 0;
      border: 2px solid #f5f5f5;
    }
    .stats-card {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    .stats-card:hover {
      transform: scale(1.05);
    }
    .review-tags {
      margin: 0.5rem 0;
    }
    .review-tag {
      background: #e3f2fd;
      color: #1976d2;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      margin-right: 0.5rem;
      display: inline-block;
    }
    .review-date {
      color: #78909c;
      font-size: 0.9rem;
    }
    .review-response {
      background: #f8f9fa;
      border-left: 4px solid #8d6e63;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 0 8px 8px 0;
    }
    .review-filter {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .filter-badge {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .filter-badge.active {
      background: #8d6e63 !important;
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <div class="sakura-decoration"></div>
  
  <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #c62828;">
    <div class="container">
      <a class="navbar-brand fw-bold" href="dashboard.html">
        ğŸ£ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³äºˆç´„ã‚·ã‚¹ãƒ†ãƒ 
      </a>
      <div class="navbar-nav ms-auto">
        <a href="dashboard.html" class="btn btn-outline-light btn-sm me-2">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
        <button class="btn btn-outline-light btn-sm" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="text-center mb-5">
      <h1 class="japanese-header">ãŠå®¢æ§˜ã®å£°</h1>
      <p class="lead">ã”æ¥åº—ã„ãŸã ã„ãŸãŠå®¢æ§˜ã‹ã‚‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>
    </div>

    <!-- Statistics -->
    <div class="row mb-5">
      <div class="col-md-3 mb-3">
        <div class="stats-card">
          <div class="display-4 mb-2">4.8</div>
          <div class="rating-stars mb-2">â˜…â˜…â˜…â˜…â˜…</div>
          <small>ç·åˆè©•ä¾¡</small>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="stats-card" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
          <div class="display-4 mb-2">347</div>
          <div class="h5">ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°</div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="stats-card" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
          <div class="display-4 mb-2">98%</div>
          <div class="h5">æº€è¶³åº¦</div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="stats-card" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);">
          <div class="display-4 mb-2">4.9</div>
          <div class="h5">ã‚µãƒ¼ãƒ“ã‚¹è©•ä¾¡</div>
        </div>
      </div>
    </div>

    <!-- Review Filters -->
    <div class="review-filter">
      <div class="row align-items-center">
        <div class="col-md-6">
          <h6 class="mb-3">çµã‚Šè¾¼ã¿</h6>
          <div class="d-flex flex-wrap gap-2">
            <span class="badge bg-primary filter-badge active" data-rating="all">ã™ã¹ã¦</span>
            <span class="badge bg-warning filter-badge" data-rating="5">â˜…â˜…â˜…â˜…â˜…</span>
            <span class="badge bg-success filter-badge" data-rating="4">â˜…â˜…â˜…â˜…â˜†ä»¥ä¸Š</span>
            <span class="badge bg-info filter-badge" data-rating="3">â˜…â˜…â˜…â˜†â˜†ä»¥ä¸Š</span>
          </div>
        </div>
        <div class="col-md-6">
          <div class="input-group">
            <input type="text" class="form-control" placeholder="ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ¤œç´¢..." id="reviewSearch">
            <button class="btn btn-japanese" onclick="searchReviews()">æ¤œç´¢</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Reviews -->
    <div class="row" id="reviewsContainer">
      <div class="col-md-6">
        <!-- Japanese Customer 1 -->
        <div class="review-card" data-rating="5">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face" alt="å±±ç”°ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">å±±ç”° èŠ±å­</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="review-date">2024å¹´1æœˆ15æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">è¨˜å¿µæ—¥</span>
            <span class="review-tag">å®¶æ—</span>
          </div>
          <p>çµå©šè¨˜å¿µæ—¥ã®ãƒ‡ã‚£ãƒŠãƒ¼ã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚ã‚¹ã‚¿ãƒƒãƒ•ã®å¯¾å¿œãŒã¨ã¦ã‚‚ä¸å¯§ã§ã€æ–™ç†ã‚‚ã™ã¹ã¦ç¾å‘³ã—ã‹ã£ãŸã§ã™ã€‚ç‰¹ã«ãƒ¡ã‚¤ãƒ³ã®å’Œç‰›ã‚¹ãƒ†ãƒ¼ã‚­ãŒçµ¶å“ã§ã—ãŸã€‚å¸­ã‚‚çª“å´ã®çœºã‚ã®è‰¯ã„å ´æ‰€ã‚’ç”¨æ„ã—ã¦ã„ãŸã ãã€ç´ æ•µãªå¤œã«ãªã‚Šã¾ã—ãŸã€‚</p>
          <img src="https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400&h=200&fit=crop" alt="æ–™ç†å†™çœŸ" class="review-image">
          <div class="review-response">
            <strong>ğŸ“ åº—é•·ã‹ã‚‰ã®è¿”ä¿¡:</strong>
            <p>å±±ç”°æ§˜ã€ã”æ¥åº—èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ãŠäºŒäººã®å¤§åˆ‡ãªè¨˜å¿µæ—¥ã®ãŠæ‰‹ä¼ã„ãŒã§ãã¦å…‰æ „ã§ã™ã€‚ã¾ãŸã®ã”æ¥åº—ã‚’å¿ƒã‚ˆã‚ŠãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚</p>
          </div>
        </div>

        <!-- Japanese Customer 2 -->
        <div class="review-card" data-rating="4">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1567532939604-b6b5b0db2604?w=100&h=100&fit=crop&crop=face" alt="ä½è—¤ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">ä½è—¤ ä¸€éƒ</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜†</div>
              <small class="review-date">2024å¹´1æœˆ12æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">å®¶æ—</span>
            <span class="review-tag">å­é€£ã‚Œ</span>
          </div>
          <p>å®¶æ—ã§ã®é£Ÿäº‹ã«åˆ©ç”¨ã—ã¾ã—ãŸã€‚å­ã©ã‚‚ç”¨ã®æ¤…å­ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚ç”¨æ„ã—ã¦ã„ãŸã ãã€å®¶æ—é€£ã‚Œã«ã‚‚å„ªã—ã„ãŠåº—ã§ã™ã€‚æ–™ç†ã®ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚‚é«˜ãã€å­ã©ã‚‚ç”¨ã«å‘³ã‚’èª¿æ•´ã—ã¦ã„ãŸã ã‘ã‚‹ã®ã‚‚åŠ©ã‹ã‚Šã¾ã—ãŸã€‚é§è»Šå ´ã‚‚åºƒãã¦ä¾¿åˆ©ã§ã—ãŸã€‚</p>
        </div>

        <!-- Japanese Customer 3 -->
        <div class="review-card" data-rating="5">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=100&h=100&fit=crop&crop=face" alt="é«˜æ©‹ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">é«˜æ©‹ ã•ãã‚‰</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="review-date">2024å¹´1æœˆ8æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">å¥³å­ä¼š</span>
            <span class="review-tag">å†™çœŸæ˜ ãˆ</span>
          </div>
          <p>å‹äººã¨ã®å¥³å­ä¼šã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚åº—å†…ã®é›°å›²æ°—ãŒã¨ã¦ã‚‚ãŠã—ã‚ƒã‚Œã§ã€æ–™ç†ã®ç››ã‚Šä»˜ã‘ã‚‚ç¾ã—ãã€å†™çœŸã‚’ãŸãã•ã‚“æ’®ã‚Šã¾ã—ãŸã€‚ãƒ‡ã‚¶ãƒ¼ãƒˆã®ãƒ—ãƒ¬ãƒ¼ãƒˆãŒç‰¹ã«å¯æ„›ãã¦ã€ã¿ã‚“ãªã§æ„Ÿå‹•ã—ã¾ã—ãŸã€‚ã¾ãŸçµ¶å¯¾ã«è¡Œãã¾ã™ï¼</p>
          <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400&h=200&fit=crop" alt="ãƒ‡ã‚¶ãƒ¼ãƒˆ" class="review-image">
        </div>
      </div>

      <div class="col-md-6">
        <!-- Japanese Customer 4 -->
        <div class="review-card" data-rating="5">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1554151228-14d9def656e4?w=100&h=100&fit=crop&crop=face" alt="éˆ´æœ¨ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">éˆ´æœ¨ ç¾å’²</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="review-date">2024å¹´1æœˆ10æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">èª•ç”Ÿæ—¥</span>
            <span class="review-tag">ã‚µãƒ—ãƒ©ã‚¤ã‚º</span>
          </div>
          <p>èª•ç”Ÿæ—¥ã®ã‚µãƒ—ãƒ©ã‚¤ã‚ºã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚ã‚¹ã‚¿ãƒƒãƒ•ã®æ–¹ãŒã‚±ãƒ¼ã‚­ã¨èŠ±ã‚’ç”¨æ„ã—ã¦ãã ã•ã‚Šã€ã¨ã¦ã‚‚æ„Ÿå‹•ã—ã¾ã—ãŸã€‚æ–™ç†ã‚‚ã‚µãƒ¼ãƒ“ã‚¹ã‚‚æœ€é«˜ã§ã€å¿˜ã‚Œã‚‰ã‚Œãªã„ä¸€æ—¥ã«ãªã‚Šã¾ã—ãŸã€‚å‹é”ã«ã‚‚çµ¶å¯¾ã«ãŠã™ã™ã‚ã—ã¾ã™ï¼</p>
        </div>

        <!-- Japanese Customer 5 -->
        <div class="review-card" data-rating="5">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?w=100&h=100&fit=crop&crop=face" alt="ç”°ä¸­ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">ç”°ä¸­ å¥å¤ª</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="review-date">2024å¹´1æœˆ8æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">æ¥å¾…</span>
            <span class="review-tag">ãƒ“ã‚¸ãƒã‚¹</span>
          </div>
          <p>ãƒ“ã‚¸ãƒã‚¹æ¥å¾…ã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚å€‹å®¤ãŒé™ã‹ã§è½ã¡ç€ãã€æ–™ç†ã®å‡ºã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚‚å®Œç’§ã§ã—ãŸã€‚å–å¼•å…ˆã®æ–¹ã«ã‚‚å¤§å¤‰å–œã‚“ã§ã„ãŸã ãã€å•†è«‡ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã¿ã¾ã—ãŸã€‚ã¾ãŸæ¥å¾…ã§åˆ©ç”¨ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚</p>
        </div>

        <!-- Foreign Customer 1 -->
        <div class="review-card" data-rating="5">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face" alt="John Smith" class="review-avatar">
            <div>
              <h6 class="mb-1">John Smith</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="review-date">2024å¹´1æœˆ5æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">Tourist</span>
            <span class="review-tag">Sushi</span>
          </div>
          <p>Visited during my trip to Japan. The sushi was incredible - the best I've ever had! Staff spoke good English and were very helpful. The atmosphere was authentic and beautiful. Highly recommend for tourists!</p>
          <div class="review-response">
            <strong>ğŸ“ Manager's Response:</strong>
            <p>Thank you for visiting us from overseas! We're delighted you enjoyed our sushi. We hope to welcome you again on your next visit to Japan.</p>
          </div>
        </div>

        <!-- Japanese Customer 6 -->
        <div class="review-card" data-rating="4">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face" alt="ä¼Šè—¤ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">ä¼Šè—¤ ã¾ã‚Šã“</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜†</div>
              <small class="review-date">2024å¹´1æœˆ3æ—¥</small>
            </div>
          </div>
          <div class="review-tags">
            <span class="review-tag">ãƒ‡ãƒ¼ãƒˆ</span>
            <span class="review-tag">å¤œæ™¯</span>
          </div>
          <p>ãƒ‡ãƒ¼ãƒˆã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚å¤œæ™¯ãŒã¨ã¦ã‚‚ç¶ºéº—ã§ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªé›°å›²æ°—ã§ã—ãŸã€‚æ–™ç†ã‚‚ç¾å‘³ã—ã‹ã£ãŸã§ã™ãŒã€å°‘ã—å¾…ã¡æ™‚é–“ãŒé•·ã‹ã£ãŸã®ãŒæ®‹å¿µã§ã™ã€‚ã¾ãŸæ©Ÿä¼šãŒã‚ã‚Œã°è¨ªã‚ŒãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
        </div>
      </div>
    </div>

    <!-- Load More Button -->
    <div class="text-center mt-4">
      <button class="btn btn-outline-japanese" onclick="loadMoreReviews()">
        ğŸ“– ã•ã‚‰ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’èª­ã¿è¾¼ã‚€
      </button>
    </div>

    <!-- Write Review Button -->
    <div class="text-center mt-4">
      <button class="btn btn-japanese" data-bs-toggle="modal" data-bs-target="#writeReviewModal">
        âœï¸ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã
      </button>
    </div>
  </div>

  <!-- Write Review Modal -->
  <div class="modal fade" id="writeReviewModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="reviewForm">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">ãŠåå‰</label>
                  <input type="text" class="form-control" id="reviewerName" required>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label">è¨ªå•æ—¥</label>
                  <input type="date" class="form-control" id="visitDate" required>
                </div>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">è©•ä¾¡</label>
              <div class="rating-stars" id="ratingSelect">
                <span style="cursor: pointer; font-size: 2rem;" onmouseover="hoverRating(1)" onmouseout="resetRating()" onclick="setRating(1)">â˜…</span>
                <span style="cursor: pointer; font-size: 2rem;" onmouseover="hoverRating(2)" onmouseout="resetRating()" onclick="setRating(2)">â˜…</span>
                <span style="cursor: pointer; font-size: 2rem;" onmouseover="hoverRating(3)" onmouseout="resetRating()" onclick="setRating(3)">â˜…</span>
                <span style="cursor: pointer; font-size: 2rem;" onmouseover="hoverRating(4)" onmouseout="resetRating()" onclick="setRating(4)">â˜…</span>
                <span style="cursor: pointer; font-size: 2rem;" onmouseover="hoverRating(5)" onmouseout="resetRating()" onclick="setRating(5)">â˜…</span>
              </div>
              <small class="text-muted" id="ratingText">æ™®é€š</small>
            </div>
            
            <div class="mb-3">
              <label class="form-label">ã‚¿ã‚°ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
              <div class="d-flex flex-wrap gap-2">
                <span class="badge bg-light text-dark tag-select" data-tag="è¨˜å¿µæ—¥">è¨˜å¿µæ—¥</span>
                <span class="badge bg-light text-dark tag-select" data-tag="å®¶æ—">å®¶æ—</span>
                <span class="badge bg-light text-dark tag-select" data-tag="ãƒ‡ãƒ¼ãƒˆ">ãƒ‡ãƒ¼ãƒˆ</span>
                <span class="badge bg-light text-dark tag-select" data-tag">æ¥å¾…</span>
                <span class="badge bg-light text-dark tag-select" data-tag="å¥³å­ä¼š">å¥³å­ä¼š</span>
                <span class="badge bg-light text-dark tag-select" data-tag="å­é€£ã‚Œ">å­é€£ã‚Œ</span>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">ãƒ¬ãƒ“ãƒ¥ãƒ¼æœ¬æ–‡</label>
              <textarea class="form-control" rows="4" placeholder="ã”æ„Ÿæƒ³ã‚’ãŠèã‹ã›ãã ã•ã„" id="reviewText" required></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">å†™çœŸã‚’è¿½åŠ ï¼ˆæœ€å¤§3æšï¼‰</label>
              <input type="file" class="form-control" accept="image/*" multiple id="reviewImages">
              <small class="text-muted">JPEG, PNGå½¢å¼ã€5MBã¾ã§</small>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          <button type="button" class="btn btn-japanese" onclick="submitReview()">æŠ•ç¨¿ã™ã‚‹</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let currentRating = 3;
    let selectedTags = [];

    // Check authentication
    const currentUser = JSON.parse(localStorage.getItem('user'));
    if (!currentUser) {
      window.location.href = 'login.html';
    }

    // Rating system
    function setRating(rating) {
      currentRating = rating;
      updateRatingDisplay();
      updateRatingText();
    }

    function hoverRating(rating) {
      const stars = document.querySelectorAll('#ratingSelect span');
      stars.forEach((star, index) => {
        star.style.color = index < rating ? '#ffc107' : '#ddd';
      });
    }

    function resetRating() {
      updateRatingDisplay();
    }

    function updateRatingDisplay() {
      const stars = document.querySelectorAll('#ratingSelect span');
      stars.forEach((star, index) => {
        star.style.color = index < currentRating ? '#ffc107' : '#ddd';
      });
    }

    function updateRatingText() {
      const texts = {
        1: 'æ‚ªã„',
        2: 'ã‚„ã‚„æ‚ªã„',
        3: 'æ™®é€š',
        4: 'è‰¯ã„',
        5: 'æœ€é«˜'
      };
      document.getElementById('ratingText').textContent = texts[currentRating];
    }

    // Tag selection
    document.querySelectorAll('.tag-select').forEach(tag => {
      tag.addEventListener('click', function() {
        const tagValue = this.getAttribute('data-tag');
        if (selectedTags.includes(tagValue)) {
          selectedTags = selectedTags.filter(t => t !== tagValue);
          this.classList.remove('bg-primary', 'text-white');
          this.classList.add('bg-light', 'text-dark');
        } else {
          selectedTags.push(tagValue);
          this.classList.remove('bg-light', 'text-dark');
          this.classList.add('bg-primary', 'text-white');
        }
      });
    });

    // Review filtering
    document.querySelectorAll('.filter-badge').forEach(badge => {
      badge.addEventListener('click', function() {
        document.querySelectorAll('.filter-badge').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        const rating = this.getAttribute('data-rating');
        filterReviews(rating);
      });
    });

    function filterReviews(rating) {
      const reviews = document.querySelectorAll('.review-card');
      reviews.forEach(review => {
        if (rating === 'all') {
          review.style.display = 'block';
        } else {
          const reviewRating = parseInt(review.getAttribute('data-rating'));
          if (reviewRating >= parseInt(rating)) {
            review.style.display = 'block';
          } else {
            review.style.display = 'none';
          }
        }
      });
    }

    function searchReviews() {
      const searchTerm = document.getElementById('reviewSearch').value.toLowerCase();
      const reviews = document.querySelectorAll('.review-card');
      
      reviews.forEach(review => {
        const text = review.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
          review.style.display = 'block';
        } else {
          review.style.display = 'none';
        }
      });
    }

    function loadMoreReviews() {
      alert('ã•ã‚‰ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’èª­ã¿è¾¼ã¿ã¾ã™...');
      // In a real app, this would load more reviews from the server
    }

    function submitReview() {
      const name = document.getElementById('reviewerName').value;
      const text = document.getElementById('reviewText').value;
      
      if (!name || !text) {
        alert('ãŠåå‰ã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼æœ¬æ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      alert('ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼æ‰¿èªå¾Œã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚');
      bootstrap.Modal.getInstance(document.getElementById('writeReviewModal')).hide();
      
      // Reset form
      document.getElementById('reviewForm').reset();
      currentRating = 3;
      selectedTags = [];
      updateRatingDisplay();
      updateRatingText();
      document.querySelectorAll('.tag-select').forEach(tag => {
        tag.classList.remove('bg-primary', 'text-white');
        tag.classList.add('bg-light', 'text-dark');
      });
    }

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
        localStorage.removeItem('user');
        window.location.href = 'index.html';
      }
    });

    // Initialize
    updateRatingDisplay();
    updateRatingText();

    // Set today's date as default visit date
    document.getElementById('visitDate').valueAsDate = new Date();
  </script>
</body>
</html>