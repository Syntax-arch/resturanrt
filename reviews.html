<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãŠå®¢æ§˜ã®å£° - ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
  <style>
    .review-card {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      border: 1px solid rgba(141, 110, 99, 0.2);
    }
    .review-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    .review-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin-right: 1rem;
      object-fit: cover;
    }
    .rating-stars {
      color: #ffc107;
      font-size: 1.2rem;
    }
    .review-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin: 1rem 0;
    }
    .stats-card {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="sakura-decoration"></div>
  
  <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #c62828;">
    <div class="container">
      <a class="navbar-brand fw-bold" href="dashboard.html">
        ğŸ£ ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³äºˆç´„ã‚·ã‚¹ãƒ†ãƒ 
      </a>
      <div class="navbar-nav ms-auto">
        <a href="dashboard.html" class="btn btn-outline-light btn-sm me-2">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
        <button class="btn btn-outline-light btn-sm" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="text-center mb-5">
      <h1 class="japanese-header">ãŠå®¢æ§˜ã®å£°</h1>
      <p class="lead">ã”æ¥åº—ã„ãŸã ã„ãŸãŠå®¢æ§˜ã‹ã‚‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>
    </div>

    <!-- Statistics -->
    <div class="row mb-5">
      <div class="col-md-3 mb-3">
        <div class="stats-card">
          <div class="display-4 mb-2">4.8</div>
          <div class="rating-stars mb-2">â˜…â˜…â˜…â˜…â˜…</div>
          <small>ç·åˆè©•ä¾¡</small>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="stats-card" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
          <div class="display-4 mb-2">256</div>
          <div class="h5">ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•°</div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="stats-card" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
          <div class="display-4 mb-2">98%</div>
          <div class="h5">æº€è¶³åº¦</div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="stats-card" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);">
          <div class="display-4 mb-2">4.9</div>
          <div class="h5">ã‚µãƒ¼ãƒ“ã‚¹è©•ä¾¡</div>
        </div>
      </div>
    </div>

    <!-- Reviews -->
    <div class="row">
      <div class="col-md-6">
        <div class="review-card">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face" alt="å±±ç”°ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">å±±ç”° èŠ±å­</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="text-muted">2024å¹´1æœˆ15æ—¥</small>
            </div>
          </div>
          <p>è¨˜å¿µæ—¥ã®ãƒ‡ã‚£ãƒŠãƒ¼ã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚ã‚¹ã‚¿ãƒƒãƒ•ã®å¯¾å¿œãŒã¨ã¦ã‚‚ä¸å¯§ã§ã€æ–™ç†ã‚‚ã™ã¹ã¦ç¾å‘³ã—ã‹ã£ãŸã§ã™ã€‚ç‰¹ã«ãƒ¡ã‚¤ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚­ãŒçµ¶å“ã§ã—ãŸã€‚ã¾ãŸãœã²è¨ªã‚ŒãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
          <img src="https://images.unsplash.com/photo-1546833999-b9f581a1996d?w=400&h=200&fit=crop" alt="æ–™ç†å†™çœŸ" class="review-image">
        </div>

        <div class="review-card">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face" alt="ä½è—¤ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">ä½è—¤ ä¸€éƒ</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜†</div>
              <small class="text-muted">2024å¹´1æœˆ12æ—¥</small>
            </div>
          </div>
          <p>å®¶æ—ã§ã®é£Ÿäº‹ã«åˆ©ç”¨ã—ã¾ã—ãŸã€‚å­ã©ã‚‚ç”¨ã®æ¤…å­ã‚„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚ç”¨æ„ã—ã¦ã„ãŸã ãã€å®¶æ—é€£ã‚Œã«ã‚‚å„ªã—ã„ãŠåº—ã§ã™ã€‚æ–™ç†ã®ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚‚é«˜ãã€ã¾ãŸæ¥ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
        </div>
      </div>

      <div class="col-md-6">
        <div class="review-card">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face" alt="éˆ´æœ¨ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">éˆ´æœ¨ ç¾å’²</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="text-muted">2024å¹´1æœˆ10æ—¥</small>
            </div>
          </div>
          <p>èª•ç”Ÿæ—¥ã®ã‚µãƒ—ãƒ©ã‚¤ã‚ºã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚ã‚¹ã‚¿ãƒƒãƒ•ã®æ–¹ãŒã‚±ãƒ¼ã‚­ã¨èŠ±ã‚’ç”¨æ„ã—ã¦ãã ã•ã‚Šã€ã¨ã¦ã‚‚æ„Ÿå‹•ã—ã¾ã—ãŸã€‚æ–™ç†ã‚‚ã‚µãƒ¼ãƒ“ã‚¹ã‚‚æœ€é«˜ã§ã€å¿˜ã‚Œã‚‰ã‚Œãªã„ä¸€æ—¥ã«ãªã‚Šã¾ã—ãŸã€‚</p>
          <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400&h=200&fit=crop" alt="ãƒ‡ã‚¶ãƒ¼ãƒˆ" class="review-image">
        </div>

        <div class="review-card">
          <div class="review-header">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="ç”°ä¸­ã•ã‚“" class="review-avatar">
            <div>
              <h6 class="mb-1">ç”°ä¸­ å¥å¤ª</h6>
              <div class="rating-stars">â˜…â˜…â˜…â˜…â˜…</div>
              <small class="text-muted">2024å¹´1æœˆ8æ—¥</small>
            </div>
          </div>
          <p>ãƒ“ã‚¸ãƒã‚¹æ¥å¾…ã§åˆ©ç”¨ã—ã¾ã—ãŸã€‚å€‹å®¤ãŒé™ã‹ã§è½ã¡ç€ãã€æ–™ç†ã®å‡ºã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚‚å®Œç’§ã§ã—ãŸã€‚å–å¼•å…ˆã®æ–¹ã«ã‚‚å¤§å¤‰å–œã‚“ã§ã„ãŸã ãã¾ã—ãŸã€‚</p>
        </div>
      </div>
    </div>

    <!-- Write Review Button -->
    <div class="text-center mt-4">
      <button class="btn btn-japanese" data-bs-toggle="modal" data-bs-target="#writeReviewModal">
        âœï¸ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã
      </button>
    </div>
  </div>

  <!-- Write Review Modal -->
  <div class="modal fade" id="writeReviewModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="reviewForm">
            <div class="mb-3">
              <label class="form-label">è©•ä¾¡</label>
              <div class="rating-stars" id="ratingSelect">
                <span style="cursor: pointer;" onclick="setRating(1)">â˜…</span>
                <span style="cursor: pointer;" onclick="setRating(2)">â˜…</span>
                <span style="cursor: pointer;" onclick="setRating(3)">â˜…</span>
                <span style="cursor: pointer;" onclick="setRating(4)">â˜…</span>
                <span style="cursor: pointer;" onclick="setRating(5)">â˜…</span>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">ãƒ¬ãƒ“ãƒ¥ãƒ¼æœ¬æ–‡</label>
              <textarea class="form-control" rows="4" placeholder="ã”æ„Ÿæƒ³ã‚’ãŠèã‹ã›ãã ã•ã„"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">å†™çœŸã‚’è¿½åŠ </label>
              <input type="file" class="form-control" accept="image/*">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          <button type="button" class="btn btn-japanese" onclick="submitReview()">æŠ•ç¨¿ã™ã‚‹</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Check authentication
    const currentUser = JSON.parse(localStorage.getItem('user'));
    if (!currentUser) {
      window.location.href = 'login.html';
    }

    // Rating system
    function setRating(rating) {
      const stars = document.querySelectorAll('#ratingSelect span');
      stars.forEach((star, index) => {
        star.style.color = index < rating ? '#ffc107' : '#ddd';
      });
    }

    function submitReview() {
      alert('ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸï¼æ‰¿èªå¾Œã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚');
      bootstrap.Modal.getInstance(document.getElementById('writeReviewModal')).hide();
    }

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
        localStorage.removeItem('user');
        window.location.href = 'index.html';
      }
    });

    // Initialize 3-star rating
    setRating(3);
  </script>
  <script>
// Initialize PWA
document.addEventListener('DOMContentLoaded', async function() {
    // Register Service Worker
    const registration = await RestaurantUtils.PWA.registerServiceWorker();
    
    // Handle app install prompt
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        RestaurantUtils.PWA.deferredPrompt = e;
        RestaurantUtils.PWA.createInstallButton();
    });
    
    // Track app installed event
    window.addEventListener('appinstalled', () => {
        RestaurantUtils.PWA.trackEvent('pwa_installed');
        console.log('ğŸ‰ PWA installed successfully!');
    });
    
    // Network status monitoring
    RestaurantUtils.PWA.addNetworkListener((status) => {
        const indicator = document.getElementById('networkStatus');
        if (indicator) {
            indicator.textContent = status === 'online' ? 'ğŸŸ¢ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' : 'ğŸ”´ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³';
            indicator.className = status === 'online' ? 'badge bg-success' : 'badge bg-danger';
        }
        
        if (status === 'online') {
            RestaurantUtils.PWA.showLocalNotification('æ¥ç¶šå›å¾©', {
                body: 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒå›å¾©ã—ã¾ã—ãŸ'
            });
        }
    });
    
    // Request notification permission on user interaction
    document.addEventListener('click', async () => {
        if (Notification.permission === 'default') {
            await RestaurantUtils.PWA.requestNotificationPermission();
        }
    }, { once: true });
    
    // Add install button to navigation
    setTimeout(() => {
        RestaurantUtils.PWA.createInstallButton();
    }, 2000);
});

// Show PWA install prompt (can be called from any button)
function showPWAInstallPrompt() {
    RestaurantUtils.PWA.showInstallPrompt();
}

// Check if app is running in standalone mode
function isRunningAsPWA() {
    return RestaurantUtils.PWA.isAppInstalled();
}
</script>
</body>
</html>